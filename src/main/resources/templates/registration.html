<!DOCTYPE html>
<html lang="en-US" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head.html :: head(title = 'Registration')}">
</head>

<body>

<div>
   <a href="@{/}">index</a>
   <a href="@{/login}">login</a>
</div>
<h1>Registrazione nuovo utente</h1>
<form id="registration-form" method="POST" name="registration-form" onsubmit="onSubmit(event)"
      th:action="@{/registerNewUser}">
   <div>
      <label for="name">Nome:</label>
      <input id="name" name="name" placeholder="Insert your name" required th:field="${user.name}"
             th:maxlength="${NAME_MAX_LENGTH}"
             th:minlength="${NAME_MIN_LENGTH}" type="text"/>
      <span th:errors="${user.name}" th:if="${#fields.hasErrors('user.name')}" th:style="'color:red'">
   </span>
      <br><br>
   </div>
   
   <div>
      <label for="surname">Surname:</label>
      <input id="surname" name="surname"
             placeholder="Insert your surname" required th:field="${user.surname}"
             th:maxlength="${SURNAME_MAX_LENGTH}" th:minlength="${SURNAME_MIN_LENGTH}" type="text"/>
      <span th:errors="${user.surname}" th:if="${#fields.hasErrors('user.surname')}" th:style="'color:red'"></span>
      <br><br>
   </div>
   
   <div>
      <label for="birth-date">Date of birth:</label>
      <input id="birth-date" min="1900-01-01" name="birth-date" required
             th:field="${user.birthDate}" th:fieldformat="'yyyy-MM-dd'" type="date"/>
      <span th:errors="${user.birthDate}" th:if="${#fields.hasErrors('user.birthDate')}" th:style="'color:red'"></span>
      <br><br>
   </div>
   
   <div>
      <label for="balance">Balance (euros):</label>
      <input id="balance" max="10000" min="0" name="balance" placeholder="euros" required step="0.1"
             th:field="${user.balance}" type="number"/>
      <span th:errors="${user.balance}" th:if="${#fields.hasErrors('user.balance')}" th:style="'color:red'"></span>
      <br><br>
   </div>
   
   <div>
      <label for="email">Email:</label>
      <input id="email" name="email"
             placeholder="Insert your email" required th:field="${user.email}" th:maxlength="${EMAIL_MAX_LENGTH}"
             th:minlength="${EMAIL_MIN_LENGTH}" type="email"/>
      <span th:errors="${user.email}" th:if="${#fields.hasErrors('user.email')}" th:style="'color:red'"></span>
      <span th:style="'color:red'" th:text="${emailUniqueError}"></span>
      <span th:style="'color:red'" th:text="${emailFormatError}"></span>
      <br><br>
   </div>
   
   <div>
      <label for="username">Username:</label>
      <input id="username" name="username"
             placeholder="Insert your username" required th:field="${credentials.username}"
             th:maxlength="${USERNAME_MAX_LENGTH}"
             th:minlength="${USERNAME_MIN_LENGTH}"
             type="text">
      <span th:errors="${credentials.username}" th:if="${#fields.hasErrors('credentials.username')}"
            th:style="'color:red'"></span>
      <span th:style="'color:red'" th:text="${usernameUniqueError}"></span>
      <br><br>
   </div>
   
   <div>
      <label for="password">Password:</label>
      <input id="password" name="password"
             placeholder="Insert your password" required th:field="${credentials.password}"
             th:maxlength="${PASSWORD_MAX_LENGTH}"
             th:minlength="${PASSWORD_MIN_LENGTH}" type="password"/>
      <span th:errors="${credentials.password}" th:if="${#fields.hasErrors('credentials.password')}"
            th:style="'color:red'"></span>
      <span th:style="'color:red'" th:text="${passwordFormatError}"></span>
      <br><br>
   </div>
   
   <div>
      <label for="confirm-password">Confirm Password:</label>
      <input id="confirm-password" name="confirm-password"
             placeholder="Confirm your password" required
             th:maxlength="${PASSWORD_MAX_LENGTH}"
             th:minlength="${PASSWORD_MIN_LENGTH}" type="password">
      <span th:errors="${credentials.password}" th:if="${#fields.hasErrors('credentials.password')}"
            th:style="'color:red'"></span>
      <span th:style="'color:red'" th:text="${passwordDifferentFromConfirmPassword}"></span>
      <br><br>
   </div>
   
   <div>
      <label for="nation">Nation:</label>
      <select id="nation" name="nation" required th:field="${user.nation}">
         <option th:each="nation : ${nations}" th:field="${user.nation}" th:id="${nation.name + '#' + nation.id}"
                 th:name="${nation.name + '#' + nation.id}"
                 th:text="${nation.name}" th:value="${nation.id}"></option>
      </select>
      <span th:errors="${user.nation}" th:if="${#fields.hasErrors('user.nation')}"
            th:style="'color:red'"></span>
      <br><br>
   </div>
   
   <div>
      <input form="registration-form" formmethod="POST" id="submit" name="submit" type="submit" value="Register"/>
   </div>
</form>
<script src="/js/registration/index.js"></script>
</body>

</html>